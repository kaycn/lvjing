<include file="Public/top" title = "添加幻灯片" />
<link rel="stylesheet" href="__PUBLIC__/Default/simditor/styles/simditor.css">
<link rel="stylesheet" href="__PUBLIC__/Default/simditor/styles/simditor-markdown.css">
<link href="__PUBLIC__/Default/jquery-upload-file/css/uploadfile.css" rel="stylesheet">
<link href="__PUBLIC__/Default/jquery-upload-file/css/uploadfile.custom.css" rel="stylesheet">
</head>
        <!-- start left -->
<include file="Public/left"/>
         <!-- end left -->
        <div class="row wrapper border-bottom white-bg page-heading">
            
            <div class="col-lg-6" style="margin: 0 auto;">
<form method="post" class="form-horizontal" action="{:U('Ksildes/doadd')}" enctype="multipart/form-data">
	 <div class="ibox-content">
	
                        <div class="hr-line-dashed"></div>
								<div class="form-group has-success">
                                    <label class="col-sm-3 control-label">幻灯片标题：</label>
                                    <div class="col-sm-9"><input type="text" class="form-control" name="title" required id="title"></div>
                                </div>
                         
            <div class="mail-box">
                  <div class="mail-body">
                    <div class="panel panel-success">
                        <div class="panel-heading">
                        封面图片1
                        </div>
                        <div class="panel-body">
                                <div class="col-sm-12"><div id="fileuploader1">上传</div></div>
                                <div class="col-sm-12">
                                    <input type="text" class="form-control" name="pic1" id = "pic1" >
                                </div>
                        </div>
                    </div>
                  </div>
                </div>
                
                  <div class="mail-box">
                  <div class="mail-body">
                    <div class="panel panel-success">
                        <div class="panel-heading">
                        封面图片2
                        </div>
                        <div class="panel-body">
                                <div class="col-sm-12"><div id="fileuploader2">上传</div></div>
                                <div class="col-sm-12">
                                    <input type="text" class="form-control" name="pic2" id = "pic2" >
                                </div>
                        </div>
                    </div>
                  </div>
                </div>
         </div>
         </div>
            <div class="col-lg-6" style="margin: 0 auto;">
            	
            	<div class="hr-line-dashed"></div>
            	<div class="hr-line-dashed"></div>
            	<div class="hr-line-dashed"></div>
            	<div class="hr-line-dashed"></div>
								
                  <div class="mail-box">
                  <div class="mail-body">
                    <div class="panel panel-success">
                        <div class="panel-heading">
                        封面图片3
                        </div>
                        <div class="panel-body">
                                <div class="col-sm-12"><div id="fileuploader3">上传</div></div>
                                <div class="col-sm-12">
                                    <input type="text" class="form-control" name="pic3" id = "pic3">
                                </div>
                        </div>
                    </div>
                  </div>
                </div>
                
                  <div class="mail-box">
                  <div class="mail-body">
                    <div class="panel panel-success">
                        <div class="panel-heading">
                        封面图片4
                        </div>
                        <div class="panel-body">
                                <div class="col-sm-12"><div id="fileuploader4">上传</div></div>
                                <div class="col-sm-12">
                                    <input type="text" class="form-control" name="pic4" id = "pic4" >
                                </div>
                        </div>
                    </div>
                  </div>
                </div>
           </div>     
                 <div class="text-center" style="margin-bottom: 100px;">
        <input type="submit" value="添加" class="btn btn-w-m btn-primary">
        </div>
            </div>
        </div>
       
        </form>
    <!-- start footer -->
                    <include file="Public/footer" />
                    <script type="text/javascript" src="__PUBLIC__/Default/simditor/scripts/module.js"></script>
                    <script type="text/javascript" src="__PUBLIC__/Default/simditor/scripts/uploader.js"></script>
                    <script type="text/javascript" src="__PUBLIC__/Default/simditor/scripts/hotkeys.js"></script>
                    <script type="text/javascript" src="__PUBLIC__/Default/simditor/scripts/simditor.js"></script>
                    <script type="text/javascript" src="__PUBLIC__/Default/simditor/scripts/marked.js"></script>
                    <script type="text/javascript" src="__PUBLIC__/Default/simditor/scripts/to-markdown.js"></script>
                    <script type="text/javascript" src="__PUBLIC__/Default/simditor/scripts/simditor-markdown.js"></script>
                    <script src="__PUBLIC__/Default/jquery-upload-file/js/jquery.form.js"></script>
                    <script src="__PUBLIC__/Default/jquery-upload-file/js/jquery.uploadfile.js"></script>
                    <script type="text/javascript">
                        $(document).ready(function() {
                            $("#fileuploader1").uploadFile({
                                url:"/admin/article/ajax_upload", //上传URL
                                fileName:"pic", //名称
                                maxFileCount:1, //上传文件数量
                                allowedTypes:"jpg, gif, png, jpeg", //类型
                                formData: {name:"pic"}, //通过FROM传过去的参数
                                onSuccess:function(files,data,xhr,pd){
                                    if(data.success){
                                        $(".ajax-file-upload-filename:contains("+files+")").after('<div style = "color:red;">上传成功</div>');
                                        $("#pic1").val(data.file_path);
                                    }else{

                                    }
                                },
                                onError: function(files,status,errMsg,pd){
                                    $(".ajax-file-upload-filename:contains("+files+")").after('<div style = "color:red;">上传失败</div>');
                                    alert('上传失败请检查,错误提示：'+errMsg);
                                }
                            });
                            
                                  $("#fileuploader2").uploadFile({
                                url:"/admin/article/ajax_upload", //上传URL
                                fileName:"pic", //名称
                                maxFileCount:1, //上传文件数量
                                allowedTypes:"jpg, gif, png, jpeg", //类型
                                formData: {name:"pic"}, //通过FROM传过去的参数
                                onSuccess:function(files,data,xhr,pd){
                                    if(data.success){
                                        $(".ajax-file-upload-filename:contains("+files+")").after('<div style = "color:red;">上传成功</div>');
                                        $("#pic2").val(data.file_path);
                                    }else{

                                    }
                                },
                                onError: function(files,status,errMsg,pd){
                                    $(".ajax-file-upload-filename:contains("+files+")").after('<div style = "color:red;">上传失败</div>');
                                    alert('上传失败请检查,错误提示：'+errMsg);
                                }
                            });
                            
                                  $("#fileuploader3").uploadFile({
                                url:"/admin/article/ajax_upload", //上传URL
                                fileName:"pic", //名称
                                maxFileCount:1, //上传文件数量
                                allowedTypes:"jpg, gif, png, jpeg", //类型
                                formData: {name:"pic"}, //通过FROM传过去的参数
                                onSuccess:function(files,data,xhr,pd){
                                    if(data.success){
                                        $(".ajax-file-upload-filename:contains("+files+")").after('<div style = "color:red;">上传成功</div>');
                                        $("#pic3").val(data.file_path);
                                    }else{

                                    }
                                },
                                onError: function(files,status,errMsg,pd){
                                    $(".ajax-file-upload-filename:contains("+files+")").after('<div style = "color:red;">上传失败</div>');
                                    alert('上传失败请检查,错误提示：'+errMsg);
                                }
                            });
                            
                                  $("#fileuploader4").uploadFile({
                                url:"/admin/article/ajax_upload", //上传URL
                                fileName:"pic", //名称
                                maxFileCount:1, //上传文件数量
                                allowedTypes:"jpg, gif, png, jpeg", //类型
                                formData: {name:"pic"}, //通过FROM传过去的参数
                                onSuccess:function(files,data,xhr,pd){
                                    if(data.success){
                                        $(".ajax-file-upload-filename:contains("+files+")").after('<div style = "color:red;">上传成功</div>');
                                        $("#pic4").val(data.file_path);
                                    }else{

                                    }
                                },
                                onError: function(files,status,errMsg,pd){
                                    $(".ajax-file-upload-filename:contains("+files+")").after('<div style = "color:red;">上传失败</div>');
                                    alert('上传失败请检查,错误提示：'+errMsg);
                                }
                            });
                            
                        });
                    </script>
            <!-- end footer -->
        </div>
      <script>
        var editor = new Simditor({
          textarea: $('#editor'),
          upload:{
            url: "{:U('Article/doUploadPic')}",
            params: null,
            fileKey: 'upload_file',
            connectionCount: 3,
            leaveConfirm: '正在上传文件，如果离开上传会自动取消'
          },
          markdown: false,
          toolbar: [
          'title',
          'bold',
          'italic',
          'underline',
          'strikethrough',
          'fontScale',
          'color',
          'ol',
          'ul',
          'blockquote',
          'code',
          'table',
          'link',
          'image',
          'hr',
          'alignment',
          'markdown'
          ]
        });
      </script>
